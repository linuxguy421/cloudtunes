# CloudTune

### NOTICE: This is a long-term project being built in Minikube -- you'll
### need to modify things (such as IP addresses) to work outside of Minikube!

### Pre-installation

In order for CloudTunes to build properly, you must do the following steps before building:

Create a ```data/station_0``` folder in ```docker-ices``` and populate it with your music files

Create a ```playlist``` folder in ```docker-ices/etc/ices``` and ```touch playlist0.txt``` for storage of the music playlist (auto-generated by build)

### Installation

#### Easy Method 

The easy way is to use the included cloudtunes.sh bash script, see how to use it with:

```./cloudtunes.sh -h```

To build the entire project and launch it:

```./cloudtunes.sh -F```

#### Manual Method

To build the cloudtune images from the Dockerfiles, run the commands:

```docker build -t docker-icecast:latest ./docker-icecast/```

```docker build -t docker-ices:latest ./docker-ices/```

```docker build -t docker-memcached:latest ./docker-memcached/```

```docker build -t radio-frontend:latest ./radio-frontend/```

The generated docker images can be run with the commands:

```docker run -d -p 8000:8000 icecast:latest```

```docker run -d -p 8001:8001 ices:latest```

```docker run -d -p 11211:11211 docker-memcached:latest```

```docker run -d -p 80:80 -p 443:443 radio-frontend:latest```

You can deploy the images to Kubernetes with the command:

```kubectl create -f docker-icecast/deploy -f docker-ices/deploy -f docker-memcached/ deploy -f docker-frontend/deploy```

**NOTES**

- Known limitations
  - ~~OGG~~ Audio files must be placed in docker-ices/data/station_0 folder
  - Filenames of ~~OGG~~ audio files MUST be in ARTIST - TITLE format for 'Now Playing' to work properly
  - ~~You must use underscores instead of spaces in OGG filenames (script below)~~ Now with automatic processing!

**TODO**

- Create PVC for OGG files
- Modify front-end to add OGG files
- Modify front-end to allow playlist reloads
- Modify front-end to allow multiple stations to be displayed
- Modify configuration files to act as templates
- Modify configuration files to allow multiple stations per icecast server
- Create audio/video Advertisement abilities
- YouTube radio mode

